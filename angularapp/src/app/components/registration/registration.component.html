<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .background {
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        .card {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        ::placeholder{
            color: black;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen bg-gradient-to-r from-red-100 via-gray-200 to-black p-6 min-h-screen">
    <div class="m-20px flex bg-white shadow-2xl rounded-lg overflow-hidden border border-gray-300">
        <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="w-4/5 p-8 bg-white shadow-md rounded-md border-4 border-blue-500" id="regForm">
            <h2 class="text-2xl font-bold mb-6 text-center text-gray-700">Registration</h2>
            <div class="mb-6">
                <!-- <label for="username" class="block text-gray-700 font-bold mb-2">Username<span style="color: red;">*</span></label> -->
                <input id="username" formControlName="username" type="text" placeholder="UserName"
                    class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                <div *ngIf="registrationForm.get('username')?.invalid && registrationForm.get('username')?.touched"
                    class="text-red-500 text-sm mt-1">
                    <span *ngIf="registrationForm.get('username')?.errors?.required">Username is required.</span>
                </div>
            </div>
            <div class="mb-6">
                <!-- <label for="email" class="block text-gray-700 font-bold mb-2">Email<span style="color: red;">*</span></label> -->
                <input id="email" formControlName="email" type="email" placeholder="Email"
                    class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                <div *ngIf="registrationForm.get('email')?.invalid && registrationForm.get('email')?.touched"
                    class="text-red-500 text-sm mt-1">
                    <span *ngIf="registrationForm.get('email')?.errors?.required">Email is required.</span>
                    <span *ngIf="registrationForm.get('email')?.errors?.email">Invalid email format.</span>
                </div>
            </div>
 
            <div class="mb-6">
                <!-- <label for="password" class="block text-gray-700 font-bold mb-2">Password<span style="color: red;">*</span></label> -->
                <div class="relative">
                    <input id="password" formControlName="password" type="password" placeholder="Password"
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <i id="passwordToggleIcon" class="password-toggle-icon fa fa-eye" (click)="togglePasswordVisibility('password', 'passwordToggleIcon')"></i>
                </div>
                <div *ngIf="registrationForm.get('password')?.invalid && registrationForm.get('password')?.touched"
                    class="text-red-500 text-sm mt-1">
                    <span *ngIf="registrationForm.get('password')?.errors?.required">Password is required.</span><br>
                    <span *ngIf="registrationForm.get('password')?.errors?.minlength">Password must be at least 8 characters long.</span><br>
                    <span *ngIf="registrationForm.get('password')?.errors?.pattern">Password must contain uppercase, lowercase, number, and special character.</span>
                </div>
            </div>
            
            <div class="mb-6">
                <!-- <label for="confirmPassword" class="block text-gray-700 font-bold mb-2">Confirm Password<span style="color: red;">*</span></label> -->
                <div class="relative">
                    <input id="confirmPassword" formControlName="confirmPassword" type="password" placeholder="Confirm Password"
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <i id="confirmPasswordToggleIcon" class="password-toggle-icon fa fa-eye" (click)="togglePasswordVisibility('confirmPassword', 'confirmPasswordToggleIcon')"></i>
                </div>
                <div *ngIf="registrationForm.get('confirmPassword')?.invalid && registrationForm.get('confirmPassword')?.touched"
                    class="text-red-500 text-sm mt-1">
                    <span *ngIf="registrationForm.get('confirmPassword')?.errors?.required">Confirm Password is required.</span>
                    <div class="text-red-500 text-sm mt-1" *ngIf="registrationForm.get('confirmPassword')?.errors?.mustMatch && registrationForm.get('confirmPassword')?.dirty">
                        Passwords do not match
                    </div>
                </div>

            </div>


            <div class="mb-6">
                <!-- <label for="mobileNumber" class="block text-gray-700 font-bold mb-2">Mobile Number<span style="color: red;">*</span></label> -->
                <input id="mobileNumber" formControlName="mobileNumber" type="text" placeholder="Mobile Number"
                    class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                <div *ngIf="registrationForm.get('mobileNumber')?.invalid && registrationForm.get('mobileNumber')?.touched"
                    class="text-red-500 text-sm mt-1">
                    <span *ngIf="registrationForm.get('mobileNumber')?.errors?.required">Mobile Number is
                        required.</span>
                    <span *ngIf="registrationForm.get('mobileNumber')?.errors?.pattern">Invalid mobile number
                        format.</span>
                </div>
            </div>
            <div class="mb-6">
                <!-- <label for="userRole" class="block text-gray-700 font-bold mb-2">Role<span style="color: red;">*</span></label> -->
                <select id="userRole" formControlName="userRole" type="text"
                    class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="" selected disabled>Select Your Role</option>
                    <option value="ADMIN">ADMIN</option>
                    <option value="USER">USER</option>
                </select>
                <div *ngIf="registrationForm.get('userRole')?.invalid && registrationForm.get('userRole')?.touched"
                    class="text-red-500 text-sm mt-1">
                    <span *ngIf="registrationForm.get('userRole')?.errors?.required">Role is required.</span>
                </div>
            </div>
            <button type="submit" [disabled]="registrationForm.invalid"
                class="w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 disabled:opacity-50">
                Register
            </button>
            <span class="text-black-800 pt-5px">Already a registered user?
                Click here to <a routerLink="/login" class="text-blue-500">Login</a></span>
        </form>
        <div *ngIf="isRegistrationSuccessful===true"
            class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50">
            <div class="bg-white p-6 rounded-md shadow-md text-center">
                <h2 class="text-2xl font-bold mb-4">Registration Successful</h2>
                <button (click)="closePopup()"
                    class="bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600">OK</button><br>
                <span>Click here for
                    <a routerLink="/login" style="color: blue;">Login</a>
                </span>
            </div>
        </div>

        <div *ngIf="registerErrorMessage" class="alert">
            {{ registerErrorMessage }}
          </div>

        <div class="w-1/2 p-6 bg-gray-100 flex flex-col justify-center">
            <div class="mb-4 p-4 bg-red-400 text-white shadow-md rounded-lg card" style="background-color: chocolate">
                <h3 class="text-lg font-bold">Education Loan</h3>
                <p>Empower your dreams with our low-interest education loans.</p>
            </div>
            <div class="mb-4 p-4 bg-green-600 text-white shadow-md rounded-lg card" style="background-color: mediumpurple">
                <h3 class="text-lg font-bold">Easy Repayment</h3>
                <p>Flexible repayment options to suit your needs.</p>
            </div>
            <div class="mb-4 p-4 bg-gray-600 text-white shadow-md rounded-lg card" style="background-color: salmon">
                <h3 class="text-lg font-bold">Quick Approval</h3>
                <p>Get your loan approved in no time.</p>
            </div>
        </div>
    </div>
</body>
</html>